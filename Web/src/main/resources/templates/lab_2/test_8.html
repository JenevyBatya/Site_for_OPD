<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            position: relative;
            width: 100%;
            height: 200px;
            border: 2px solid black;
        }

        #circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: red;
            transition: left 2s, right 2s;
        }
    </style>
</head>
<body>
<div class="container">
    <div id="circle"></div>
</div>

<script>
    let circle = document.getElementById('circle');
    let containerWidth = document.querySelector('.container').clientWidth;
    let isMoving = false;
    let direction = 'right';
    let distance = 100; // Максимальное расстояние, на которое круг перемещается

    function moveCircle() {
        if (!isMoving) {
            isMoving = true;
            let newPosition = getRandomPosition();
            let newDistance = Math.floor(Math.random()*10+2) * 40;

            if (newPosition === 'left') {
                circle.style.left = (containerWidth/2 - newDistance) + 'px';
                direction = 'left';
            } else {
                circle.style.left = (containerWidth/2 + newDistance) + 'px';
                direction = 'right';
            }

            setTimeout(function () {
                isMoving = false;
            }, 2000); // Задержка перед остановкой круга
        }
    }

    function getRandomPosition() {
        return Math.random() < 0.5 ? 'left' : 'right';
    }

    document.addEventListener('keydown', function (event) {
        if (isMoving && event.keyCode === 37 && direction === 'left') {
            resetCircle();
        } else if (isMoving && event.keyCode === 39 && direction === 'right') {
            resetCircle();
        }
    });

    function resetCircle() {
        circle.style.animation = 'reset 1s';
        circle.style.left = '50%';
        setTimeout(function () {
            circle.style.animation = '';
            isMoving = false;
        }, 1000);
    }

    setInterval(moveCircle, Math.random() * 5000 + 2000);
</script>
</body>
</html>
